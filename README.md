# üß™ Swifixture

![Swift Version](https://img.shields.io/badge/Swift-6.0-orange.svg) ![License](https://img.shields.io/badge/License-Apache%202.0-blue.svg)

Swifixture is a Swift Package that automatically generates fixture methods for Swift.

## üì¶ Installation

To use Swifixture, you need to have Swift installed on your machine. You can clone the repository and build the package using the following commands:

```bash
bash
git clone https://github.com/ruwatana/swifixture.git
cd swifixture
swift build
```

## üöÄ Usage

Swifixture can be executed from the command line. The basic syntax is as follows:

```bash
swift run Swifixture [options]
```

### üîß Options

| Option                                         | Description                                                                                         |
| ---------------------------------------------- | --------------------------------------------------------------------------------------------------- |
| `--source <path>`                              | Specify the source file or directory path to search recursively for Swift files. Default is `./`.   |
| `--output <path>`                              | Specify the output file for the generated fixture methods. Default is `./Generated/Fixtures.swift`. |
| `--additional-imports <module1> <module2> ...` | Specify additional module names to import. By default, Foundation is imported.                      |
| `--testable-import <module>`                   | Specify a module name to testable import. By default, it is not imported.                           |

### üí° Example

To generate fixture methods for a Swift file located at `./MyStruct.swift` and output the results to `./Generated/Fixtures.swift` by default, you can run:

```bash
swift run Swifixture --source ./MyStruct.swift
```

#### Using `/// @fixturable`

You can annotate your `struct` with `/// @fixturable` to enable automatic generation of fixture methods.

For example:

```swift
/// @fixturable
struct User {
    var name: String
    var age: Int
}
```

This will generate fixture methods for the `User` struct on `./Generated/Fixtures.swift`, allowing you to easily create test instances.

```swift
///
///  @Generated by Swifixture
///

import Foundation

extension User {
    static func fixture(
        name: String = "name",
        age: Int = 0
    ) -> Self {
        .init(
            name: name,
            age: age
        )
    }
}
```

#### Override Settings for Custom Initial Values

You can also specify custom initial values for properties using the `/// @fixturable(override: key = value)` annotation. For instance, if you have a custom `enum` and want to set a specific value, you can do it like this:

```swift
enum UserRole {
    case admin
    case user
}

/// @fixturable(override: role = .admin)
struct User {
    var name: String
    var age: Int
    var role: UserRole
}
```

In this example, the `role` property will default to `.admin` when generating fixture methods, allowing for more control over the test data.

#### Example of Generated Output

When you run the Swifixture tool with the above `User` struct, it will generate a file similar to the following:

```swift
///
///  @Generated by Swifixture
///

import Foundation

extension User {
    static func fixture(
        name: String = "name",
        age: Int = 0,
        role: UserRole = .admin
    ) -> Self {
        .init(
            name: name,
            age: age,
            role: role
        )
    }
}
```

#### Additional Imports and Testable Import

If you want to include additional imports and a testable import, you can do so like this:

```bash
swift run Swifixture \
    --source ./MyStruct.swift \
    --output ./Generated/Fixtures.swift \
    --additional-imports Combine SwiftUI \
    --testable-import MyModule
```

then:

```swift
///
///  @Generated by Swifixture
///

import Foundation
import Combine
import SwiftUI

@testable import MyModule

...
```

## üöß Work In Progress

Currently, Swifixture only supports auto-generating fixture methods for `struct`.

Additionally, it is limited to Swift's standard primitive types such as `String`, `Int`, `Double`, etc.

If you want to use custom types, you consider to use override settings or contribute to Swifixture!

## ü§ù Contributing

We welcome contributions to improve Swifixture! Please feel free to submit a pull request or open an issue for any bugs or feature requests.

## üìÑ License

This project is licensed under the Apache License, Version 2.0 - see the [LICENSE](LICENSE) file for details.
